<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>

<BorderPane prefHeight="700.0" prefWidth="900.0" stylesheets="@../../../styles.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.billeteravirtual.ui.PanelAdminController">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-background-color: white; -fx-padding: 20;">
            <Label styleClass="header-label" text="Panel de Administración" />

            <Region HBox.hgrow="ALWAYS" />

            <Button onAction="#onBotonSalirClick" styleClass="danger-button" text="Cerrar Sesión" />
        </HBox>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: transparent;">

            <Tab text="Usuarios Registrados">
                <VBox spacing="15.0" style="-fx-padding: 20;">
                    <Label styleClass="form-label" text="Listado de clientes en el sistema:" />

                    <TableView fx:id="tablaUsuarios" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colCedula" text="Cédula" prefWidth="120"/>
                            <TableColumn fx:id="colNombre" text="Nombre" prefWidth="150"/>
                            <TableColumn fx:id="colAlias" text="Alias" prefWidth="120"/>
                            <TableColumn fx:id="colEmail" text="Email" prefWidth="180"/>
                            <TableColumn fx:id="colSaldo" text="Saldo Actual" prefWidth="100"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>

                    <Button text="Refrescar Lista" onAction="#cargarUsuarios" styleClass="button-secondary"/>
                </VBox>
            </Tab>

            <Tab text="Historial Global">
                <VBox spacing="15.0" style="-fx-padding: 20;">
                    <Label styleClass="form-label" text="Todas las transacciones del sistema:" />

                    <TableView fx:id="tablaTransacciones" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colID" text="ID" prefWidth="100"/>
                            <TableColumn fx:id="colFecha" text="Fecha" prefWidth="120"/>
                            <TableColumn fx:id="colTipo" text="Tipo" prefWidth="120"/>
                            <TableColumn fx:id="colMonto" text="Monto ($)" prefWidth="100"/>
                            <TableColumn fx:id="colUsuario" text="Usuario (Cédula)" prefWidth="150"/>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>

                    <Button text="Refrescar Historial" onAction="#cargarTransacciones" styleClass="button-secondary"/>
                </VBox>
            </Tab>

            <Tab text="Gestión de Archivos">
                <VBox alignment="CENTER" spacing="30.0" style="-fx-padding: 50;">
                    <Label styleClass="header-label" text="Persistencia de Datos" />
                    <Label text="Guarda o recupera la información de la base de datos local." textFill="#5f6368"/>

                    <HBox alignment="CENTER" spacing="20.0">
                        <Button text="Guardar Todo en Disco" onAction="#onBotonGuardarArchivo" style="-fx-font-size: 16px; -fx-padding: 15 30;" />
                        <Button text="Cargar desde Disco" onAction="#onBotonCargarArchivo" style="-fx-font-size: 16px; -fx-padding: 15 30;" />
                    </HBox>
                </VBox>
            </Tab>

        </TabPane>
    </center>

</BorderPane>